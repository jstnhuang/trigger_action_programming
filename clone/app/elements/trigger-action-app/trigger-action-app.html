<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../rule-list/rule-list.html">

<polymer-element name="trigger-action-app" attributes="">
  <style>
    paper-action-dialog {
      width: 100%;
    }
  </style>
  <template>
    <link rel="stylesheet" href="trigger-action-app.css">
    <paper-button raised id="createButton" on-click="{{createRule}}">Create a rule</paper-button>
    <rule-list id="ruleList" rules="{{rules}}" on-delete-rule="{{ruleDeleted}}"></rule-list>
  </template>
  <script>
    (function () {
      Polymer({
        ready: function () {
          this.rules = [
            {
              triggers: [
                {
                  key: 'daily_time',
                  displayName: 'Daily time',
                  params: {}
                },
                {
                  key: 'weather',
                  displayName: 'Weather',
                  params: {}
                }
              ],
              action: {
                key: 'send_email',
                displayName: 'Send email',
                params: {}
              }
            },
            {
              triggers: [
                {
                  key: 'daily_time',
                  displayName: 'Daily time',
                  params: {}
                }
              ],
              action: {
                key: 'brew_coffee',
                displayName: 'Brew coffee',
                params: {}
              }
            }              
          ];
        },

        createRule: function() {
          this.$.ruleList.newRule();
          this.$.createButton.disabled = true;
        },

        ruleDeleted: function() {
          this.$.createButton.disabled = false;
        }
      });
    })();
  </script>
</polymer-element>
